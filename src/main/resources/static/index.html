<!DOCTYPE html>
<html>
<head>
    <title>Employees</title>

    <style type="text/css">
        html, body {
            font: 10pt arial;
            padding: 0;
            margin: 0;
            width: 100%;
            height: 100%;
        }

        #employees {
            width: 100%;
            height: 100%;
        }

        table.legend_table {
            font-size: 11px;
            border-width:1px;
            border-color:#d3d3d3;
            border-style:solid;
        }
        table.legend_table,td {
            border-width:1px;
            border-color:#d3d3d3;
            border-style:solid;
            padding: 2px;
        }
        div.table_content {
            width:80px;
            text-align:center;
        }
        div.table_description {
            width:100px;
        }

        #operation {
            font-size:28px;
        }
        #nodeSettingsBox {
            display:none;
            position:absolute;
            top: 10%;
            left: 40%;
            z-index:299;
            width:250px;
            height:120px;
            background-color: #f9f9f9;
            border-style:solid;
            border-width:3px;
            border-color: #5394ed;
            padding:10px;
            text-align: center;
        }
    </style>

    <link href="vis.min.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="vis.min.js"></script>
    <script type="text/javascript" src="jquery-3.1.0.slim.min.js"></script>

    <script type="text/javascript">
        var network;

        function draw() {
            var nodes = new vis.DataSet([
                {id: "fry", label: "Fry"},
                {id: "leela", label: "Leela"},
                {id: "bender", label: "Bender"},
                {id: "amy", label: "Amy"},
                {id: "hermes", label: "Hermes"},
                {id: "professor", label: "Professor"},
                {id: "zoidberg", label: "Zoidberg"},
                {id: "scruffy", label: "Scruffy"}
            ]);

            var edges = new vis.DataSet([
                {from: "professor", to: "fry", arrows: 'to'},
                {from: "professor", to: "leela", arrows: 'to'},
                {from: "professor", to: "bender", arrows: 'to'},
                {from: "professor", to: "amy", arrows: 'to'},
                {from: "professor", to: "hermes", arrows: 'to'},
                {from: "professor", to: "zoidberg", arrows: 'to'},
                {from: "professor", to: "scruffy", arrows: 'to'},
                {from: "leela", to: "fry", arrows: 'to'},
                {from: "leela", to: "bender", arrows: 'to'}
            ]);

            var container = document.getElementById('employees');
            var data = {
                nodes: nodes,
                edges: edges
            };
            var options = {
                edges: {
                    smooth: {
                        type: "continuous",
                        forceDirection: "none"
                    }
                },
                physics: {
                    hierarchicalRepulsion: {
                        nodeDistance: 200,
                        damping: 0.7
                    },
                    solver: "hierarchicalRepulsion",
                    timestep: 0.2
                },
                layout: {
                    randomSeed: 13
                },
                manipulation: {
                    addNode: function (data, callback) {
                        // filling in the popup DOM elements
                        document.getElementById('operation').innerHTML = "Add Node";
                        document.getElementById('node-id').value = data.id;
                        document.getElementById('node-label').value = data.label;
                        document.getElementById('saveButton').onclick = saveData.bind(this, data, callback);
                        document.getElementById('cancelButton').onclick = clearPopUp.bind();
                        document.getElementById('nodeSettingsBox').style.display = 'block';
                    },
                    editNode: function (data, callback) {
                        // filling in the popup DOM elements
                        document.getElementById('operation').innerHTML = "Edit Node";
                        document.getElementById('node-id').value = data.id;
                        document.getElementById('node-label').value = data.label;
                        document.getElementById('saveButton').onclick = saveData.bind(this, data, callback);
                        document.getElementById('cancelButton').onclick = cancelEdit.bind(this,callback);
                        document.getElementById('nodeSettingsBox').style.display = 'block';
                    },
                    addEdge: function (data, callback) {
                        if (data.from == data.to) {
                            return;
                        }
                        data.arrows = 'to';
                        callback(data);
                    }
                }
            };
            network = new vis.Network(container, data, options);
        }

        function clearPopUp() {
            document.getElementById('saveButton').onclick = null;
            document.getElementById('cancelButton').onclick = null;
            document.getElementById('nodeSettingsBox').style.display = 'none';
        }

        function cancelEdit(callback) {
            clearPopUp();
            callback(null);
        }

        function saveData(data,callback) {
            data.id = document.getElementById('node-id').value;
            data.label = document.getElementById('node-label').value;
            clearPopUp();
            callback(data);
        }
    </script>
</head>
<body onload="draw()">
<div id="employees"></div>

<div id="nodeSettingsBox">
    <span id="operation">node</span> <br>
    <table style="margin:auto;"><tr>
        <td>id</td><td><input id="node-id" value="new value" /></td>
    </tr>
        <tr>
            <td>label</td><td><input id="node-label" value="new value" /></td>
        </tr></table>
    <input type="button" value="save" id="saveButton" />
    <input type="button" value="cancel" id="cancelButton" />
</div>
</body>
</html>